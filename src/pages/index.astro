---
export const prerender = false;

import Base from "../layouts/Base.astro";

import heroDefault from "../data/hero.json";
import ctaDefault from "../data/cta.json";

import Hero from "../components/home/Hero.astro";
import FinalCTA from "../components/home/FinalCTA.astro";

type HeroContent = typeof heroDefault;
type CtaContent = typeof ctaDefault;

const env = Astro.locals?.runtime?.env ?? {};

async function readKVOrDefault<T>(key: string, fallback: T): Promise<T> {
  if (!env.CONTENT_KV) return fallback;
  const raw = await env.CONTENT_KV.get(`${key}.json`);
  if (!raw) return fallback;
  try { return JSON.parse(raw) as T; } catch { return fallback; }
}

const hero = await readKVOrDefault<HeroContent>("hero", heroDefault);
const cta  = await readKVOrDefault<CtaContent>("cta", ctaDefault);


const homepageSEO = {
  title: "YY Sng — AI Operator",
  description:
    "I work across operations, strategy, and product — helping teams redesign execution so AI creates leverage instead of noise.",
  canonical: "https://yysng.me/",
  ogTitle: "AI doesn’t fail inside companies. Workflows do.",
  ogDescription:
    "I work across operations, strategy, and product — helping teams redesign execution so AI creates leverage instead of noise.",
  ogType: "website",
  keywords: "AI operator, workflow redesign, execution, operations, product, strategy",
};

const homepageJsonLd = [
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "YY Sng",
    "url": "https://yysng.me/",
    "sameAs": ["https://www.linkedin.com/in/yysng/"],
  },
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "YY Sng",
    "url": "https://yysng.me/",
    "inLanguage": "en",
  },
];
---

<Base
  title={homepageSEO.title}
  description={homepageSEO.description}
  canonical={homepageSEO.canonical}
  ogTitle={homepageSEO.ogTitle}
  ogDescription={homepageSEO.ogDescription}
  ogType={homepageSEO.ogType}
  keywords={homepageSEO.keywords}
  jsonLd={homepageJsonLd}
>
  <main>

     <!-- HERO -->
    <Hero data={hero} />

    <!-- 2) EXECUTION SPINE — OPEN (Operator Fold peek via overlap; no extra background effects) -->
    <section
      id="execution-spine"
      class="-mt-12 md:-mt-16 pt-20 md:pt-24 pb-12 md:pb-14"
    >
      <div class="container">
        <div class="max-w-3xl">
          <h2 data-reveal-item class="text-balance">
            Most teams use AI.<br />
            Work still feels the same.
          </h2>

          <div class="mt-12 space-y-3 text-[20px] md:text-[22px] leading-snug text-[color:var(--muted)]">
            <p>Outputs increase.</p>
            <p>Decisions stay slow.</p>
            <p>Execution doesn’t compound.</p>
          </div>

          <p class="mt-12 text-[18px] leading-relaxed text-[color:var(--muted)] max-w-[70ch]">
            Inside operating companies, the pattern is consistent:
          </p>

          <p class="mt-3 text-[18px] leading-relaxed text-[color:var(--muted)] max-w-[70ch]">
            AI changes outcomes only when workflows change with it.
          </p>

          <p class="mt-3 text-[18px] leading-relaxed text-[color:var(--muted)] max-w-[70ch]">
            That redesign layer is the AI Operator lens
          </p>
        </div>
      </div>
    </section>

  <!-- PROOF SURFACES — OPEN (merged) -->
<section id="work" class="pt-14 md:pt-18 pb-20 md:pb-24">
  <div class="container">

    <!-- Proof header -->
    <div class="max-w-3xl">
      <h2 data-reveal-item class="text-balance">
        Real builds. Real operating decisions.
      </h2>

      <p class="mt-8 text-[18px] leading-relaxed text-[color:var(--muted)] max-w-[62ch]">
        Live projects showing how AI changes execution when the system changes first.
      </p>
    </div>

    <!-- Columns -->
    <div class="mt-14 grid grid-cols-1 lg:grid-cols-3 gap-10 lg:gap-0 items-start lg:divide-x lg:divide-[color:var(--border)]">

      <!-- Column 1 -->
      <div class="flex flex-col lg:pr-8">
        <h3 class="text-[color:var(--ink)] leading-tight">
          <span class="whitespace-nowrap">AI-Ready</span><br />
          <span class="whitespace-nowrap">Websites</span>
        </h3>

        <p class="mt-4 text-[16px] leading-relaxed text-[color:var(--muted)] max-w-[46ch]">
          Web systems designed to evolve with AI — not wait for the next redesign cycle.
        </p>

        <ul class="mt-7 space-y-2 text-sm">
          <li>
            <a
              href="/case-studies/colin-mcc/"
              class="inline-flex items-center gap-2 text-[color:var(--accent)] font-medium no-underline hover:no-underline hover:opacity-80 transition"
            >
              <span>Colin MCC — homepage system</span><span aria-hidden="true">→</span>
            </a>
          </li>
          <li>
            <a
              href="/case-studies/ezycoaching/"
              class="inline-flex items-center gap-2 text-[color:var(--accent)] font-medium no-underline hover:no-underline hover:opacity-80 transition"
            >
              <span>EzyCoaching — conversion layer</span><span aria-hidden="true">→</span>
            </a>
          </li>
        </ul>
      </div>

      <!-- Column 2 -->
      <div class="flex flex-col lg:px-8">
        <h3 class="text-[color:var(--ink)] leading-tight">
          <span class="whitespace-nowrap">AI In</span><br />
          <span class="whitespace-nowrap">Live Operations</span>
        </h3>

        <p class="mt-4 text-[16px] leading-relaxed text-[color:var(--muted)] max-w-[46ch]">
          Implementation inside real teams — where constraints, not demos, shape the system.
        </p>

        <ul class="mt-7 space-y-2 text-sm">
          <li>
            <a
              href="https://www.linkedin.com/in/yysng/"
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center gap-2 text-[color:var(--accent)] font-medium no-underline hover:no-underline hover:opacity-80 transition"
            >
              <span>BD system — field loop notes</span><span aria-hidden="true">→</span>
            </a>
          </li>
          <li>
            <a
              href="https://www.linkedin.com/in/yysng/"
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center gap-2 text-[color:var(--accent)] font-medium no-underline hover:no-underline hover:opacity-80 transition"
            >
              <span>Blog AI system — content ops model</span><span aria-hidden="true">→</span>
            </a>
          </li>
        </ul>
      </div>

      <!-- Column 3 -->
      <div class="flex flex-col lg:pl-8">
        <h3 class="text-[color:var(--ink)] leading-tight">
          <span class="whitespace-nowrap">Operator</span><br />
          <span class="whitespace-nowrap">Link Surfaces</span>
        </h3>

        <p class="mt-4 text-[16px] leading-relaxed text-[color:var(--muted)] max-w-[46ch]">
          A fast, context-ready profile for leaders on the move.
        </p>

        <ul class="mt-7 space-y-2 text-sm">
          <li>
            <a
              href="/u/yysng"
              class="inline-flex items-center gap-2 text-[color:var(--accent)] font-medium no-underline hover:no-underline hover:opacity-80 transition"
            >
              <span>View my profile</span><span aria-hidden="true">→</span>
            </a>
          </li>
          <li>
            <a
              href="/u/yysng/"
              class="inline-flex items-center gap-2 text-[color:var(--accent)] font-medium no-underline hover:no-underline hover:opacity-80 transition"
            >
              <span>Create yours</span><span aria-hidden="true">→</span>
            </a>
          </li>
        </ul>
      </div>

    </div>
  </div>
</section>

    <!-- 5) FINAL CTA — VERY OPEN (copy locked) -->
    <FinalCTA data={cta} />
  </main>
</Base>